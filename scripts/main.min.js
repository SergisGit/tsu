!function(){"use strict";(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i))&&document.querySelector("html").classList.add("is-ios");var e=window.matchMedia("(min-width: 768px)").matches?2:1,t=window.matchMedia("(min-width: 1440px)").matches?[0,39.94769520495493]:window.matchMedia("(min-width: 1170px)").matches?[-10,39.94769520495493]:window.matchMedia("(min-width: 768px)").matches?[-17,39.94769520495493]:[40,44.755914715920284];mapboxgl.accessToken="pk.eyJ1IjoiaXNzZXJnIiwiYSI6ImNqbWJ1MG4xZzA3YXUzd21pOTNieDZwdWMifQ.M_XBqcEKA-BFF-AG9ZW_5Q";var o=document.querySelector("#js-map");if(o){var a=o.getAttribute("data-graduates"),g=new mapboxgl.Map({container:o,style:"mapbox://styles/isserg/cjomx48pj92fk2st9b0712bk1",center:t,zoom:e,minZoom:e,maxZoom:e,scrollZoom:!1,dragRotate:!1,touchZoomRotate:!1});$.getJSON(a,function(e){g.on("load",function(){g.addSource("graduates",{type:"geojson",data:e});var p,l=new mapboxgl.Popup({closeButton:!0,closeOnClick:!0,className:"map__popup",anchor:"bottom",offset:25});l.on("close",function(){p&&p.classList.remove("map__marker--active")});var w="data:image/svg+xml;utf8,<svg version='1.0' viewBox='0 0 24 24' xml:space='preserve' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g fill='%230047FF'><polygon points='12,3 1,9 12,15 23,9 '/><polygon points='19,12.8 12,17 5,12.8 5,17.2 12,21 19,17.2 '/><rect height='8' width='2' x='21' y='9'/></g></svg>";e.features.forEach(function(m,e,t){var a=m.properties.icon?m.properties.icon:w,i=document.createElement("div");i.id="marker-"+e,i.className="map__marker",i.innerHTML='<img src="'+a+'" alt="graduate" class="map__marker-icon">',m.properties.link||i.classList.add("map__marker--gray"),new mapboxgl.Marker(i,{offset:[0,0]}).setLngLat(m.geometry.coordinates).addTo(g),i.addEventListener("click",function(e){e.stopPropagation(),p&&p.classList.remove("map__marker--active"),(p=this).classList.add("map__marker--active");var t=m.properties.name?m.properties.name:"Неизвестный",a=m.properties.image?m.properties.image:w,i=m.properties.year?'<div class="infowindow__year">’'+m.properties.year+"</div>":"",o=m.properties.place?'<div class="infowindow__place">'+m.properties.place+"</div>":"",r=m.properties.link?'<a href="'+m.properties.link+'" class="infowindow__btn  btn">ЧИТАТЬ ИСТОРИЮ</a>':"",n=m.properties.link?"":" infowindow__image--gray";l.setHTML('<div class="infowindow"><div class="infowindow__image-wrapper"><img class="infowindow__image'+n+'" src="'+a+'" alt="'+t+'">'+i+'</div><div class="infowindow__content"><div class="infowindow__name">'+t+"</div>"+o+r+"</div></div>"),l.setLngLat({lng:m.geometry.coordinates[0],lat:m.geometry.coordinates[1]}).addTo(g);var s=l._container;s.style.width="",s.style.height="";var d=Math.round(s.offsetWidth);d%2!=0&&(s.style.width=d+1+"px");var c=Math.round(s.offsetHeight);c%2!=0&&(s.style.height=c+1+"px")}),e===t.length-1&&o.classList.add("map__wrapper--loaded")})})})}var i=$(".sharer");$.each(i,function(){var e=$(this);e.attr("data-url")||e.attr("data-url",window.location.href),e.attr("data-title")||e.attr("data-title",$(document).find("title").text())});var r=$("html, body");$("#js-upBtn").on("click",function(){return r.animate({scrollTop:0},500),!1});var n=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(n,"px")),window.addEventListener("resize",function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))})}();